webpackJsonp([58],{200:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var n=o(15),s=i(n),l=o(3),a=o(2),r=o(6),d=o(14),c=o(219),g=o(1).create("ledge");o(103);var p=l.View.extend({styles:c,className:function(){var t=this.options.text_wrap?"text-wrap":"";return(0,s.default)([c.scope,this.options.className,t])},template:o(226),ui:{button:".button",close:".ledge-close"},events:{click:"onClick","click @ui.button":"onClickButton","click @ui.close":"onClickClose"},initialize:function(t){if("string"!=typeof t.text&&"string"!=typeof t.html)throw new Error("Ledge requires text or html");this.initializeOptions(),this.initializeModel(),this.render(),this.show()},initializeOptions:function(){g("initializeOptions"),a.defaults(this.options,{close_button:!1,text_wrap:!1,buttons:[],viewOptions:{}})},initializeModel:function(){this.model=new d,this.model.set(this.options)},onRender:function(){var t=this;a.defer(function(){t.fadeIn()})},fadeIn:function(){this.$el.addPrefixedClass("fade","in")},fadeOut:function(){this.$el.addPrefixedClass("fade","out")},show:function(){this.ledge&&this.ledge.length||(this.ledge=r('<div class="ledge"></div>'),r.body.append(this.ledge),r.body.addClass("has-ledge")),this.ledge.html(this.el)},onClick:function(t){t.stopPropagation(),this.trigger("click",t)},onClickButton:function(t){t.stopPropagation(),this.trigger("click:button",t);var e=this.ui.button.index(t.target),o=this.options.buttons[e],i=o&&o.name;i&&this.trigger("click:"+i,t)},onClickClose:function(){this.trigger("dismiss"),this.fadeOut()},onBeforeDestroy:function(){this.ledge.remove(),r.body.removeClass("has-ledge")}});t.exports=p},214:function(t,e,o){e=t.exports=o(8)(),e.push([t.id,"._3dRRKHax5c5DPooAg_qM3w{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;background-color:hsla(0,0%,100%,.9);box-shadow:0 0 10px 0 rgba(0,0,0,.3);position:fixed;bottom:0;padding:0 30px;box-sizing:border-box;line-height:60px;z-index:1;width:100%;opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);transition:all .35s ease-in-out}._3dRRKHax5c5DPooAg_qM3w.fade-in{transition-duration:.4s;-webkit-transform:translateY(0);transform:translateY(0);opacity:1}._3dRRKHax5c5DPooAg_qM3w.fade-out{transition-duration:.25s;opacity:0}._3dRRKHax5c5DPooAg_qM3w .ledge-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap}._3dRRKHax5c5DPooAg_qM3w .ledge-content h1{font-size:16px;margin:0;margin-right:20px;color:#333}._3dRRKHax5c5DPooAg_qM3w .ledge-content .primary-buttons .button{min-width:100px}._3dRRKHax5c5DPooAg_qM3w .ledge-content .primary-buttons .button+.button{margin-left:10px}._3dRRKHax5c5DPooAg_qM3w .ledge-close{width:18px;font-size:18px;cursor:pointer;filter:alpha(opacity=30);opacity:.3}._3dRRKHax5c5DPooAg_qM3w .ledge-close:hover{filter:alpha(opacity=100);opacity:1}@media only screen and (max-width:720px){._3dRRKHax5c5DPooAg_qM3w{line-height:inherit;padding:20px;padding-top:12px;text-align:center}._3dRRKHax5c5DPooAg_qM3w .ledge-content{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-flex:1;-ms-flex:1 0;flex:1 0}._3dRRKHax5c5DPooAg_qM3w .ledge-content h1{margin-bottom:10px;margin-right:0}._3dRRKHax5c5DPooAg_qM3w .ledge-close{width:12px;font-size:12px;position:absolute;top:10px;right:10px}}@media only screen and (max-width:640px){._3dRRKHax5c5DPooAg_qM3w{padding:10px}._3dRRKHax5c5DPooAg_qM3w .ledge-content{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}._3dRRKHax5c5DPooAg_qM3w .ledge-content h1{max-width:calc(100vw - 115px);font-size:12px;margin-bottom:0;margin-right:5px;-webkit-align-self:center;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._3dRRKHax5c5DPooAg_qM3w .ledge-content .primary-buttons .button{min-width:0}._3dRRKHax5c5DPooAg_qM3w .ledge-close{top:15px}._3dRRKHax5c5DPooAg_qM3w.text-wrap{display:block}._3dRRKHax5c5DPooAg_qM3w.text-wrap .ledge-content{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap;margin:0}._3dRRKHax5c5DPooAg_qM3w.text-wrap .ledge-content h1{width:calc(100vw - 115px);margin:0;font-size:14px;white-space:normal;overflow:auto;text-overflow:inherit}._3dRRKHax5c5DPooAg_qM3w.text-wrap .ledge-content .primary-buttons{margin-top:5px}._3dRRKHax5c5DPooAg_qM3w.text-wrap .ledge-content .primary-buttons .button.small{font-size:14px;line-height:25px}._3dRRKHax5c5DPooAg_qM3w.text-wrap .ledge-close{top:10px}}.edit-open ._3dRRKHax5c5DPooAg_qM3w{opacity:0;bottom:-300px}",""]),e.locals={scope:"_3dRRKHax5c5DPooAg_qM3w"}},219:function(t,e,o){var i=o(214),n=o(9);"string"==typeof i&&(i=[[t.id,i,""]]),t.exports=i.locals||{},t.exports._getContent=function(){return i},t.exports._getCss=function(){return i.toString()},t.exports._insertCss=function(t){return n(i,t)}},226:function(t,e,o){var i=o(10);t.exports=function(t){var e,o="";Array.prototype.join;return o+='<div class="ledge-content">\n    <h1>\n        ',t.html?o+="\n            "+(null==(e=t.html)?"":e)+"\n        ":t.text&&(o+="\n            "+(null==(e=t.text)?"":i.escape(e))+"\n        "),o+='\n    </h1>\n    <div class="primary-buttons">\n        ',t.buttons.forEach(function(t){o+="\n            ",o+=t.href?'\n                <a class="'+(null==(e=t.classnames)?"":e)+'" href="'+(null==(e=t.href)?"":e)+'">'+(null==(e=t.text)?"":e)+"</a>\n            ":'\n                <button class="'+(null==(e=t.classnames)?"":e)+'">'+(null==(e=t.text)?"":e)+"</button>\n            ",o+="\n        "}),o+="\n    </div>\n</div>\n",t.close_button&&(o+='\n    <div class="ledge-close glyph-close glyph-center">&nbsp;</div>\n'),o+="\n"}},1124:function(t,e,o){"use strict";var i=o(3),n=o(2),s=o(7),l=o(200),a=o(150),r=o(92);o(1).create("signature_ledge");t.exports=i.Object.extend({initialize:function(){n.bindAll(this,"showLedge"),n.delay(this.showLedge,2e3),this.model=a.model},showLedge:function(){var t="Ready to add your page to your email&nbsp;signature?",e="large";r.isNot("mobile")||(e="small"),this.ledge=new l({html:t,text_wrap:!0,close_button:!0,buttons:[{text:"Yes",name:"yes",classnames:"button "+e+" dark seafoam"},{text:"No",name:"no",classnames:"button "+e+" dark outlined"}]}),s.metrics_editpanel.trigger("ledge:signature:shown"),this.model.get("actions.viewed_signature_ledge")||this.model.get("actions").patch({viewed_signature_ledge:Date.now()},{silent:!0}),this.listenTo(this.ledge,"click:yes",this.onClickYes),this.listenTo(this.ledge,"click:no",this.onClickNo),this.listenTo(this.ledge,"dismiss",this.dismissLedge)},onClickYes:function(){s.metrics_editpanel.trigger("ledge:signature:clicked"),s.editpanel.request("show:pane","publish","signature")},onClickNo:function(){this.dismissLedge(),this.destroyLedge()},dismissLedge:function(){this.model.get("actions").patch({dismissed_signature_ledge:Date.now()})},destroyLedge:function(){this.ledge&&this.ledge.destroy()},onBeforeDestroy:function(){this.destroyLedge()}})}});
//# sourceMappingURL=signature_ledge.12a02ae6e35bfc98e7c4.bundle.js.map